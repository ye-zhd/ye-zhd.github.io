<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>故事</title>
      <link href="/posts/3.html"/>
      <url>/posts/3.html</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="流浪猫与小女孩"><a href="#流浪猫与小女孩" class="headerlink" title="流浪猫与小女孩"></a><center>流浪猫与小女孩</center></h2><p>&emsp;&emsp;一个小镇上，小女孩 像往常一样的放学，走在回家的路上，手上拿着好吃的零食。这时候小流浪猫三花，闻到了味道，跟着小女孩一路，撒着娇要吃的，小女孩觉得小猫可怜可爱，分了自己的零食给它吃，小猫喵喵的叫着表示感谢，开心的吃着。第二天，小猫看到小女孩像认出了她一样，直接跑了上去撒娇要吃的，平时就喜欢小动物的小女孩遇到这样也很开心，把自己一大半的零食分给了小猫。周五放学，小猫跟着来到了小女孩家附近，平时怕人的小猫知道不能随便进别人家，在门口待着，小女孩拿出自己平时珍藏的好吃的鱼干零食喂它。这几天喂着，小猫就开始有点粘着小女孩，经常从自己待着的废品站跑出来到小女孩家里，小女孩本身也挺喜欢猫的，但家里人从来不让养宠物。就这样过了几周后，一直流浪到处找吃的小猫有了家的感觉，变得更加粘着小女孩了，因为知道找她就有东西吃。但小猫很活泼调皮，爪子也很长。</p><p>&emsp;&emsp;小女孩平时要上学，也有自己的作业要做。后面时间长了，小猫变得不那么怕生，调皮捣乱的经常跑进房间里，一会儿就又跑去其他地方玩了，小女孩总是笑笑的看着它，时常停下自己做作业的笔与小猫玩闹。小猫知道找小女孩就有吃的，还可以陪着一起玩，，还不小心抓破了小女孩的手，小女孩很善良，没有责备它，也不太在意，依然经常拿鱼干零食与每天剩下的饭喂它。</p><p>&emsp;&emsp;小女孩要期中考试了，自然作业变多了，得到好处的小猫后来有点放纵了，只要肚子饿就开始叫着要吃的。然而小女孩要复习写作业，要准备自己的期中考试，温柔的小女孩依然继续喂着小猫，但没有小鱼零食了，就只有些平时故意留着的剩饭，作业变多了，小女孩没时间去买零食了。现在小女孩觉得它有点调皮了，没有了想养它的想法了，还是继续的喂着小猫。小猫只要有的吃就行，但它觉得奇怪为什么不陪我玩了呢，开始跑到房间去找小女孩。小女孩看到小猫进来找她，还放下手中的笔，抱着小猫玩了一会。再几次，小猫一直跑来跑去的，小女孩觉得有点不耐烦了，常常敷衍的摸了摸小猫，就把小猫抱出门外，让它自己去玩。有一次小猫跳到桌子上，弄乱了作业，小女孩生气了，这次小女孩跺着脚，把小猫吓了出去。小猫也感觉到了小女孩的生气，隔天，小猫怯怯的在门口叫着，今天小女孩忘记留点东西给小猫了，就走到门口抱着小猫玩了一会。小猫习惯了在这等吃的，就继续等着，后面实在饿了，自己去找吃的了。</p><p>&emsp;&emsp;小猫还是像往日一样又来了，小女孩马上就要考试了，也没有特意去留东西给它吃。小猫一直喵喵的叫着，小女孩有点静不下心来写作业觉得烦。小猫也察觉到自己以前太调皮了，现在小猫自己找吃的，就找女孩玩会，但小女孩不想理它了，小猫没看到小女孩出来，自己跑进房间去了，小女孩生气的把它抱了出去，说别来找我了，小猫感觉到自己做错了，隔天还是来找小女孩，小女孩又把它赶了出去。这个时候小猫有点不知道怎么办，但小猫习惯了有小女孩的日子，依旧常常放学路上跟着小女孩，去到小女孩家附近，小女孩讨厌它了，赶它走，小猫只能的远远的喵喵叫着，回到了最初的自己一只猫呆着的时候,小猫还想着小女孩的零食鱼干，想着和她一起玩，只是回不到从前了。</p><p align="right">By: 发神经的叶落落</p>]]></content>
      
      
      <categories>
          
          <category> 心情 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> think </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ansible学习使用</title>
      <link href="/posts/2.html"/>
      <url>/posts/2.html</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="ansible"><a href="#ansible" class="headerlink" title="ansible"></a>ansible</h1><h2 id="crontab-配置ansible-注意事项"><a href="#crontab-配置ansible-注意事项" class="headerlink" title="crontab 配置ansible 注意事项"></a>crontab 配置ansible 注意事项</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment">#需要配置 PYTHONPATH</span><span class="token comment"># import os </span><span class="token comment"># print os.sys.path 查看pythonpath</span><span class="token builtin class-name">export</span> <span class="token assign-left variable">PYTHONPATH</span><span class="token operator">=</span>/usr/lib/python2.6/site-packagesansible-playbook /tmp/test.yaml -s <span class="token operator">>></span>/tmp/ansible-cron.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ansible-cron"><a href="#ansible-cron" class="headerlink" title="ansible cron"></a>ansible cron</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment">#ansible 添加 定时任务</span>ansible <span class="token number">10.252</span>.10.101 -m <span class="token function">cron</span> -a <span class="token string">"minute=*/10 hour=* day=* month=*   weekday=* name='test' job=<span class="token entity" title="\&quot;">\"</span>sh /data/etl/mv_data.sh<span class="token entity" title="\&quot;">\"</span>"</span> -S -R root<span class="token comment">#ansible 注释任务</span>ansible <span class="token number">10.252</span>.10.101 -m <span class="token function">cron</span> -a <span class="token string">"name='test' job=<span class="token entity" title="\&quot;">\"</span>sh /data/etl/mv_data.sh<span class="token entity" title="\&quot;">\"</span> disabled=yes"</span> -S -R root<span class="token comment">#ansible 删除任务</span>ansible <span class="token number">10.252</span>.10.101 -m <span class="token function">cron</span> -a <span class="token string">"name=test state=absent"</span><span class="token comment">#####sed 查找替换 定时任务时间周期</span><span class="token function">sed</span> -i <span class="token string">'/mv_data/s/30/5/g'</span> /var/spool/cron/root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ansible-cmdb"><a href="#ansible-cmdb" class="headerlink" title="ansible-cmdb"></a>ansible-cmdb</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">wget</span> https://github.com/fboender/ansible-cmdb/releases/download/1.30/ansible-cmdb-1.30.tar.gz<span class="token function">tar</span> -xvf ansible-cmdb-1.30.tar.gz -C /usr/share/ansible/plugins<span class="token builtin class-name">cd</span> /usr/share/ansible/plugins/ansible-cmdb-1.30/ <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span><span class="token comment">#生成所有主机的facts信息</span>ansible all -m setup --tree /usr/local/out<span class="token comment">#生成的facts信息生成web页面</span>ansible-cmdb /usr/local/out/ <span class="token operator">></span> overview.html<span class="token comment">#以资产列表形式统计出ansible主机信息</span>ansible-cmdb -t txt_table --columns name,os,ip,mem,cpus /usr/local/out/<span class="token comment">#more命令</span><span class="token function">more</span> */*/*.txt <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'602.E602E22'</span><span class="token comment">#批量改名字</span><span class="token function">rename</span> .ok .xml *.ok<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ansible-playbook"><a href="#ansible-playbook" class="headerlink" title="ansible playbook"></a>ansible playbook</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@ansible PlayBook<span class="token punctuation">]</span><span class="token comment"># ansible-playbook -h</span><span class="token comment">#ansible-playbook常用选项：</span>--check  or -C    <span class="token comment">#只检测可能会发生的改变，但不真正执行操作</span>--list-hosts      <span class="token comment">#列出运行任务的主机</span>--list-tags       <span class="token comment">#列出playbook文件中定义所有的tags</span>--list-tasks      <span class="token comment">#列出playbook文件中定义的所以任务集</span>--limit           <span class="token comment">#主机列表 只针对主机列表中的某个主机或者某个组执行</span>-f                <span class="token comment">#指定并发数，默认为5个</span>-t                <span class="token comment">#指定tags运行，运行某一个或者多个tags。（前提playbook中有定义tags）</span>-v                <span class="token comment">#显示过程  -vv  -vvv更详细</span>root权限执行：  ansible-playbook  -S -R root test.yaml <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>批量拷贝文件到本地</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment">##批量拷贝文件到本地</span>- hosts: cxchuzhi:gmqchuzhi  tasks:    - name: result_shazhupan      find:        paths: /tmp/        patterns: <span class="token string">"*xml"</span>        recurse: no      register: file_2_fetch    - name: data_shazhupan      fetch:        src: <span class="token string">"&#123;&#123; item.path &#125;&#125;"</span>        dest: /tmp/linux_check/        flat: <span class="token function">yes</span>      with_items: <span class="token string">"&#123;&#123; file_2_fetch.files &#125;&#125;"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加修改用户yaml</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment">##添加用户并sudo</span>- hosts: <span class="token builtin class-name">test</span>  vars:    user: hdfs    password: <span class="token string">'eversec123098'</span>  remote_user: root  tasks:  - name: Add user <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    user: <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>user<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token assign-left variable">comment</span><span class="token operator">=</span><span class="token string">"ambari user"</span> <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">'eversec123098'</span>  - name: Config /etc/sudoers    lineinfile: <span class="token assign-left variable">dest</span><span class="token operator">=</span>/etc/sudoers <span class="token assign-left variable">state</span><span class="token operator">=</span>present  <span class="token assign-left variable">line</span><span class="token operator">=</span><span class="token string">'&#123;&#123;item&#125;&#125;'</span>    with_items:      - <span class="token string">"&#123;&#123; user&#125;&#125; ALL=(ALL) NOPASSWD: ALL"</span>      - <span class="token string">"Defaults: &#123;&#123;user&#125;&#125;  !requiretty"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">- hosts: px  gather_facts: <span class="token boolean">false</span>  tasks:  - name: Change password    user: <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>  <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> chpass <span class="token operator">|</span> password_hash<span class="token punctuation">(</span><span class="token string">'sha512'</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>  <span class="token assign-left variable">update_password</span><span class="token operator">=</span>always  - name: Config /etc/sudoers    lineinfile: <span class="token assign-left variable">dest</span><span class="token operator">=</span>/etc/sudoers <span class="token assign-left variable">state</span><span class="token operator">=</span>present  <span class="token assign-left variable">line</span><span class="token operator">=</span><span class="token string">'&#123;&#123;item&#125;&#125;'</span>    with_items:      - <span class="token string">"&#123;&#123; name &#125;&#125; ALL=(ALL) NOPASSWD: ALL"</span>      - <span class="token string">"Defaults: &#123;&#123;name&#125;&#125;  !requiretty修改或者添加用户：ansible-playbook  -S -R root useradd-input.yaml -e "</span>name<span class="token operator">=</span>test <span class="token assign-left variable">chpass</span><span class="token operator">=</span><span class="token number">123456</span>"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>服务启动：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span>                       <span class="token comment">#固定格式</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> 10.20.3.107      <span class="token comment">#定义需要执行主机</span>  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root       <span class="token comment">#远程用户</span>  <span class="token key atrule">vars</span><span class="token punctuation">:</span>                   <span class="token comment">#定义变量</span>    <span class="token key atrule">http_port</span><span class="token punctuation">:</span> <span class="token number">8088</span>       <span class="token comment">#变量</span>  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>                             <span class="token comment">#定义一个任务的开始</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start crond      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=crond state=started<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ansible </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/4a17b156.html"/>
      <url>/posts/4a17b156.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
